<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bi√™n nh·∫≠n h·ªì s∆° nh·∫≠p h·ªçc | AMS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="hutech.png" sizes="32x32">
  <link rel="apple-touch-icon" href="hutech.png">
  <meta name="theme-color" content="#2563eb">
</head>
 <style>
    /* Hover nh·∫π logo */
    a:hover img { transform: scale(1.05); transition: transform 0.2s ease; }
  </style>
<body class="min-h-screen flex flex-col">

  <!-- ·∫®n HTML t·ªõi khi check xong /me ƒë·ªÉ tr√°nh nh√°y -->
  <script>document.documentElement.style.visibility = 'hidden';</script>

  <!-- Toast -->
  <div id="toast-wrap"></div>

  <!-- HEADER CHUNG AMS -->
  <header class="w-full bg-white/85 backdrop-blur-sm border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between gap-3">
      <a href="/ams_home.html"
         class="flex items-center gap-3 hover:opacity-90 transition"
         title="V·ªÅ trang ch·ªß">
        <img src="hutech.png" alt="HUTECH" class="h-10 w-10 object-contain select-none" />
        <div>
          <h1 class="text-2xl sm:text-3xl font-extrabold text-blue-700 leading-tight">
            ADMISSION MANAGEMENT SYSTEM - AMS
          </h1>
          <p class="text-sm sm:text-base text-gray-600 font-medium tracking-wide">
            V-HT.PTƒêT ¬∑ Bi√™n nh·∫≠n h·ªì s∆° nh·∫≠p h·ªçc
          </p>
        </div>
      </a>

      <!-- G√≥c ph·∫£i: API base + quick info -->
      <div class="flex flex-col items-end gap-2">
        <div class="flex flex-wrap items-center gap-2 text-sm">
          <label for="apiBase" class="text-gray-600 font-medium">API Base</label>
          <input id="apiBase" class="input w-48 md:w-55" placeholder="http://..." />
          <button class="btn btn-outline" id="btnTestApi" title="Ki·ªÉm tra k·∫øt n·ªëi API">üîç Test</button>
        </div>
        <span id="navHello" class="text-xs text-gray-500 hidden"></span>
      </div>
    </div>
  </header>

  <!-- MAIN LAYOUT -->
  <main class="flex-1 flex bg-slate-50/60">
    <!-- SIDEBAR -->
    <aside class="hidden md:flex md:flex-col w-64 bg-white/90 border-r border-slate-200 backdrop-blur-sm">
      <!-- User block + dropdown -->
      <div class="px-4 pt-4 pb-3 border-b border-slate-200 relative">
        <button id="userMenuBtn"
                class="w-full justify-between text-sm text-gray-700 bg-white hover:bg-slate-50 px-3 py-2 rounded-lg shadow border flex items-center gap-2"
                aria-haspopup="true" aria-expanded="false" aria-controls="userMenu">
          <span>
            <span><b id="helloName">‚Äî</b></span>
            <span class="text-gray-500"> (<span id="helloRole">‚Äî</span>)</span>
          </span>
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" class="text-gray-500" aria-hidden="true">
            <path fill-rule="evenodd"
                  d="M5.23 7.21a.75.75 0 011.06.02L10 11.187l3.71-3.956a.75.75 0 011.08 1.04l-4.24 4.52a.75.75 0 01-1.08 0l-4.24-4.52a.75.75 0 01.02-1.06z"
                  clip-rule="evenodd"/>
          </svg>
        </button>

        <div id="userMenu"
            class="menu absolute right-0 top-[calc(100%+4px)] w-48 md:w-56
                    bg-white border rounded-lg shadow-md overflow-hidden z-20 text-xs"
            role="menu">
          <a href="/account"
            class="block px-3 py-1.5 hover:bg-gray-50"
            role="menuitem">
            üîé Th√¥ng tin t√†i kho·∫£n
          </a>
          <a href="/account"
            class="block px-3 py-1.5 hover:bg-gray-50"
            role="menuitem">
            üîê ƒê·ªïi m·∫≠t kh·∫©u
          </a>
          <button id="btnMenuLogout"
                  class="w-full text-left px-3 py-1.5 hover:bg-gray-50 text-red-600"
                  role="menuitem">
            ‚Ü©Ô∏è ƒêƒÉng xu·∫•t
          </button>
        </div>

        <!-- N√∫t login/logout c≈© (·∫©n) ƒë·ªÉ JS c≈© kh√¥ng l·ªói n·∫øu c√≥ d√πng -->
        <a id="navLogin" href="/auth_login.html"
           class="hidden"></a>
        <button id="navLogout" class="hidden" type="button"></button>
      </div>

      <!-- Menu ch√≠nh -->
      <nav class="py-4 text-sm flex-1">
        <div class="px-4 pb-3 text-xs font-semibold text-gray-500 uppercase">
          Menu ch√≠nh
        </div>
        <a href="/ams_home.html"         class="nav-item">üè† Trang ch·ªß</a>
        <a href="/compilation.html"      class="nav-item nav-item-active">üìù Nh·∫≠p h·ªì s∆° m·ªõi</a>
        <a href="/students_list.html"    class="nav-item">üìã Danh s√°ch h·ªì s∆°</a>
        <a href="/import_students.html"  class="nav-item">‚¨áÔ∏è Import h·ªçc vi√™n</a>
        <a href="/journal.html"          class="nav-item">üïì Nh·∫≠t k√Ω h·ªá th·ªëng</a>
        <a href="/checklist_admin.html"  class="nav-item">üìë Qu·∫£n l√Ω danh m·ª•c h·ªì s∆°</a>
        <a href="/admin"                 class="nav-item">üë§ Qu·∫£n l√Ω t√†i kho·∫£n</a>
        <!-- <a href="/receipt.html"          class="nav-item nav-item-active">üßæ Bi√™n nh·∫≠n h·ªì s∆°</a> -->
      </nav>
    </aside>

    <!-- CONTENT -->
    <section class="flex-1 flex items-start justify-center">
      <div class="max-w-7xl mx-auto p-6 space-y-6 w-full">

        <!-- Thanh nh·ªè d∆∞·ªõi header: link nhanh v·ªÅ DS h·ªì s∆° & reload checklist -->
        <div class="flex flex-wrap items-center justify-between gap-2">
          <div class="flex flex-wrap items-center gap-2">
            <a id="navStudents"
               href="/students_list.html"
               class="btn btn-outline">
              üìã Danh s√°ch h·ªì s∆°
            </a>
            <button class="btn btn-outline" id="btnReloadChecklist" title="T·∫£i l·∫°i danh s√°ch checklist">
              ‚Üª Checklist
            </button>
          </div>
          <div class="hidden sm:flex text-xs text-gray-500">
            Nh·∫•n <span class="mx-1 px-1 rounded border bg-slate-50 font-mono">Ctrl</span> + <span class="mx-1 px-1 rounded border bg-slate-50 font-mono">Enter</span> ƒë·ªÉ l∆∞u nhanh.
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Form -->
          <section class="lg:col-span-2 card">
            <div class="section-title">Bi√™n nh·∫≠n h·ªì s∆° nh·∫≠p h·ªçc</div>

            <!-- Kh·ªëi 1: M√£, ng√†y, kh√≥a, ƒë·ª£t -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="label">M√£ h·ªì s∆°</label>
                <input class="input" id="ma_ho_so" placeholder="0000" readonly />
              </div>
              <div>
                <label class="label">Ng√†y nh·∫≠n HS</label>
                <input class="input" id="ngay_nhan_hs" type="date" readonly disabled />
              </div>
              <div>
                <label class="label" for="khoa">Ni√™n Kh√≥a</label>
                <select class="input" id="khoa" name="khoa">
                  <option value="">-- Ch·ªçn kh√≥a --</option>
                  <option>24</option><option>25</option><option>26</option>
                  <option>27</option><option>28</option><option>29</option><option>30</option>
                </select>
              </div>
              <div>
                <label class="label">ƒê·ª£t</label>
                <select class="input" id="dot">
                  <option value="">-- Ch·ªçn ƒë·ª£t --</option>
                  <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
                  <option>6</option><option>7</option><option>8</option><option>9</option><option>10</option>
                  <option>11</option><option>12</option><option>13</option><option>14</option><option>15</option>
                  <option>16</option><option>17</option><option>18</option><option>19</option><option>20</option>
                </select>
              </div>
            </div>

            <!-- Th√¥ng tin HV -->
            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="label">H·ªç ƒë·ªám</label>
                <input class="input" id="ho_dem" placeholder="Nguy·ªÖn VƒÉn" />
              </div>
              <div>
                <label class="label">T√™n</label>
                <input class="input" id="ten" placeholder="An" />
              </div>

              <div class="md:col-span-2 text-xs text-gray-500 -mt-2">
                H·ªç v√† t√™n: <b id="fullNameMirror"></b>
              </div>
              <input type="hidden" id="ho_ten" />

              <div>
                <label class="label">M√£ s·ªë HV</label>
                <input class="input" id="ma_so_hv" placeholder="2510200xxx" />
              </div>
              <div>
                <label class="label">Gi·ªõi t√≠nh</label>
                <select class="input" id="gioi_tinh">
                  <option value="">-- Ch·ªçn gi·ªõi t√≠nh --</option>
                  <option value="Nam">Nam</option>
                  <option value="N·ªØ">N·ªØ</option>
                  <option value="Kh√°c">Kh√°c</option>
                </select>
              </div>
              <div>
                <label class="label">D√¢n t·ªôc</label>
                <input class="input" id="dan_toc"/>
              </div>
              <div>
                <label class="label">Ng√†y sinh</label>
                <input class="input" id="ngay_sinh" type="date" />
              </div>
              <div>
                <label class="label">S·ªë ƒëi·ªán tho·∫°i</label>
                <input class="input" id="so_dt"/>
              </div>
              <div>
                <label class="label">Email h·ªçc vi√™n</label>
                <input class="input" id="email_hoc_vien" type="email"/>
              </div>
              <div>
                <label class="label">Ng√†nh nh·∫≠p h·ªçc</label>
                <select class="input" id="nganh_nhap_hoc">
                  <option value="">-- Ch·ªçn ng√†nh --</option>
                  <option>T√¢m l√Ω h·ªçc</option>
                  <option>Ng√¥n ng·ªØ Anh</option>
                  <option>C√¥ng ngh·ªá th√¥ng tin</option>
                  <option>Qu·∫£n tr·ªã kinh doanh</option>
                  <option>K·∫ø to√°n</option>
                  <option>Lu·∫≠t kinh t·∫ø</option>
                  <option>Qu·∫£n l√Ω x√¢y d·ª±ng</option>
                  <option>T√†i ch√≠nh - Ng√¢n h√†ng</option>
                  <option>Marketing</option>
                  <option>Qu·∫£n tr·ªã kh√°ch s·∫°n</option>
                  <option>Qu·∫£n tr·ªã d·ªãch v·ª• du l·ªãch v√† l·ªØ h√†nh</option>
                </select>
              </div>
              <div>
                <label class="label">ƒê√£ T·ªët nghi·ªáp tr∆∞·ªõc ƒë√≥</label>
                <select class="input" id="da_tn_truoc_do">
                  <option value="">-- Ch·ªçn ƒê·ªëi t∆∞·ª£ng --</option>
                  <option>THPT</option><option>Trung c·∫•p</option><option>Cao ƒë·∫≥ng</option><option>ƒê·∫°i h·ªçc</option>
                </select>
              </div>
              <div>
                <label class="label">Ng∆∞·ªùi nh·∫≠n (Ch·ªØ k√Ω)</label>
                <div class="relative">
                  <input id="nguoi_nhan_ky_ten" class="input pr-9 bg-gray-100 text-gray-500 cursor-not-allowed" readonly />
                  <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 select-none" title="ƒê√£ kh√≥a">üîí</span>
                </div>
              </div>
            </div>

            <!-- Checklist -->
            <div class="mt-6">
              <div class="section-title">H·ªì s∆° g·ªìm:</div>
              <div class="overflow-auto">
                <table class="min-w-full border bg-white">
                  <thead class="bg-gray-100">
                    <tr>
                      <th class="p-2 border">STT</th>
                      <th class="p-2 border text-center">Danh m·ª•c</th>
                      <th class="p-2 border">C√≥?</th>
                      <th class="p-2 border">S·ªë l∆∞·ª£ng</th>
                    </tr>
                  </thead>
                  <tbody id="docsBody"></tbody>
                </table>
              </div>
            </div>

            <!-- Ghi ch√∫ -->
            <div class="mt-4">
              <label class="label">Ghi ch√∫ (C√°c ch·ª©ng ch·ªâ kh√°c s·∫Ω ƒëi·ªÅn ·ªü ƒë√¢y)</label>
              <input class="input" id="ghi_chu" />
            </div>

            <div class="mt-6 flex flex-col items-center gap-2">
              <button id="btnSaveOrUpdate" class="btn btn-secondary min-w-[160px]">
                L∆∞u
              </button>
              <span class="text-xs text-gray-500 text-center">
                Ho·∫∑c b·∫•m <b>Ctrl + Enter</b> ƒë·ªÉ l∆∞u nhanh.
              </span>

              <!-- Th√¥ng b√°o tr·∫°ng th√°i l∆∞u / c·∫≠p nh·∫≠t -->
              <p id="msg" class="text-sm text-emerald-600 text-center"></p>
            </div>
          </section>

          <!-- Panel ph·∫£i -->
          <aside class="card space-y-6 lg:sticky lg:top-4">
            <section>
              <div class="section-title"><center>TRA C·ª®U H·ªí S∆†</center></div>

              <label class="label">Nh·∫≠p M√£ S·ªë H·ªçc Vi√™n</label>
              <div class="flex gap-2 relative">
                <input class="input flex-1" id="q_ma_so_hv" placeholder="VD: 2510xxxxxx" />
                <button id="btnLoadApplicantMSHV" class="btn-print">üîé</button>
              </div>

              <label class="label mt-3 block">Nh·∫≠p H·ªç t√™n</label>
              <div class="flex gap-2 relative">
                <input class="input flex-1" id="q_ho_ten" />
                <button id="btnSearchByName" class="btn-print">üîé</button>

                <!-- dropdown g·ª£i √Ω theo t√™n -->
                <div id="nameResults" class="absolute left-0 top-full mt-1 z-50 w-full max-h-64 overflow-auto rounded-md border bg-white shadow hidden">
                  <div class="text-xs text-gray-500 mb-1 px-2 pt-2">Ch·ªçn m·ªôt k·∫øt qu·∫£ ƒë·ªÉ t·∫£i v√†o form:</div>
                  <ul id="nameResultsList" class="divide-y"></ul>
                </div>
              </div>

              <!-- In -->
              <section id="sectionPrintLoaded" class="mt-2">
                <div class="flex gap-2">
                  <button id="btnPrintLoadedA5" class="btn-print" disabled>In A5</button>
                  <button id="btnPrintLoadedA4" class="btn-print" disabled>In A4</button>
                </div>
                <p id="lookupMsg" class="text-sm text-gray-600 mt-2"></p>
              </section>
            </section>

            <!-- TR·ª¢ GI√öP: ƒë·∫©y xu·ªëng d∆∞·ªõi, c√≥ vi·ªÅn tr√™n -->
            <section class="mt-10 pt-4 border-t border-slate-200">
              <div class="section-title"><center>TR·ª¢ GI√öP</center></div>
              <ul class="list-disc ml-5 text-sm text-gray-600 space-y-1">
                <li>Ch·ªçn API Base r·ªìi nh·∫•n n√∫t Test cho l·∫ßn ƒë·∫ßu ho·∫∑c khi ƒë·ªïi server.</li>
                <li>Nh·∫•n n√∫t ‚Üª ƒë·ªÉ t·∫£i l·∫°i danh s√°ch h·ªì s∆° v√† checklist t·ª´ server.</li>
                <li>M√£ h·ªì s∆° v√† ng√†y nh·∫≠n HS s·∫Ω t·ª± ƒë·ªông g√°n.</li>
                <li>PDF m·ªü trong tab m·ªõi; n·∫øu b·ªã ch·∫∑n s·∫Ω hi·ªán c·∫£nh b√°o b·∫≠t pop-up.</li>
                <li>T√¨m ki·∫øm theo <b>M√£ s·ªë HV</b> ho·∫∑c <b>H·ªç v√† t√™n</b>.</li>
                <li>ƒê·ªÉ tr·ªëng s·ªë l∆∞·ª£ng trong checklist ƒë·ªÉ ƒë√°nh d·∫•u c√≥/kh√¥ng.</li>
                <li>Li√™n h·ªá Email: <a href="mailto:hc.tuan@hutech.edu.vn">hc.tuan@hutech.edu.vn</a></li>
                <li>Li√™n h·ªá zalo: <a href="http://zalo.me/tuanconghuynh">Hu·ª≥nh C√¥ng Tu·∫•n t·∫°i ƒë√¢y!</a></li>
              </ul>
            </section>
          </aside>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER CHUNG -->
  <footer class="bg-[#1E50B4] text-white">
    <div class="max-w-7xl mx-auto px-6 py-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 text-sm">
      <div>
        <p class="font-semibold uppercase">VI·ªÜN H·ª¢P T√ÅC V√Ä PH√ÅT TRI·ªÇN ƒê√ÄO T·∫†O</p>
        <p class="uppercase">TR∆Ø·ªúNG ƒê·∫†I H·ªåC C√îNG NGH·ªÜ TPHCM (HUTECH)</p>
        <p><b>S√†i G√≤n Campus:</b> 475A ƒêi·ªán Bi√™n Ph·ªß, Ph∆∞·ªùng Th·∫°nh M·ªπ T√¢y, TP. H·ªì Ch√≠ Minh</p>
        <p>
          <b>ƒêT:</b> (028) 6686 6465 ¬∑
          <b>Email:</b> <a href="mailto:daotaotructuyen@hutech.edu.vn" class="underline hover:text-yellow-300">daotaotructuyen@hutech.edu.vn</a>
        </p>
      </div>
      <p class="text-xs">
        ¬© V-HT.PTƒêT HUTECH ‚Äî Code by
        <a href="http://zalo.me/tuanconghuynh" target="_blank" rel="noopener noreferrer" class="underline hover:text-yellow-300">
          HC-Tu·∫•n
        </a>
      </p>
    </div>
  </footer>

  <!-- Modal c·∫≠p nh·∫≠t l√Ω do (ƒê·ªÇ NGO√ÄI, NGAY D∆Ø·ªöI MAIN/FOOTER) -->
  <div id="modalUpdateReason"
       class="fixed inset-0 bg-slate-900/50 hidden z-50 backdrop-blur-sm
              flex items-center justify-center">
    <div class="bg-white rounded-2xl shadow-2xl w-[95vw] max-w-2xl transform transition-all">
      <div class="px-6 py-4 border-b flex items-center justify-between bg-blue-50 rounded-t-2xl">
        <div class="text-lg font-bold text-blue-800">üìù Y√äU C·∫¶U C·∫¨P NH·∫¨T H·ªí S∆†</div>
        <button id="urClose"
                class="text-sm px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-2 focus:ring-blue-300">
          ‚ùå
        </button>
      </div>

      <div class="p-6 space-y-4 text-base">
        <div>
          <label for="updateReasonSelect" class="block font-semibold text-gray-800 mb-2">
            Y√™u c·∫ßu c·∫≠p nh·∫≠t
          </label>
          <select id="updateReasonSelect" class="input w-full h-12 text-base">
            <option value="">-- Ch·ªçn l·ªánh b·ªï sung --</option>
            <option value="capnhat_hoso_moi">C·∫≠p nh·∫≠t h·ªì s∆° m·ªõi</option>
            <option value="bosung_hoso">B·ªï sung h·ªì s∆°</option>
            <option value="capnhat_thongtin">C·∫≠p nh·∫≠t th√¥ng tin h·ªçc vi√™n</option>
            <option value="capnhat_chungchi">C·∫≠p nh·∫≠t ch·ª©ng ch·ªâ</option>
            <option value="chinhsua_hoso">Ch·ªânh s·ª≠a h·ªì s∆°</option>
            <option value="khac">L√Ω do kh√°c...</option>
          </select>
        </div>

        <div id="reasonOtherWrap" class="hidden">
          <label for="updateReasonText" class="block font-semibold text-gray-800 mb-2">
            Nh·∫≠p l√Ω do kh√°c
          </label>
          <textarea id="updateReasonText" rows="3"
                    class="input w-full text-base"
                    placeholder="Nh·∫≠p l√Ω do kh√°c..."></textarea>
        </div>
      </div>

      <div class="px-6 py-4 border-t flex justify-end gap-3 bg-gray-50 rounded-b-2xl">
        <button id="urCancel" class="btn btn-outline">H·ªßy</button>
        <button id="urOK" class="btn btn-secondary">C·∫≠p nh·∫≠t</button>
      </div>
    </div>
  </div>

  <!-- Modal x√°c nh·∫≠n ƒêƒÉng xu·∫•t d√πng chung -->
  <div class="overlay" id="logoutModal" role="dialog" aria-modal="true" aria-labelledby="lgTitle">
    <div class="modal max-w-md" id="logoutBox" tabindex="-1">
      <div class="px-6 py-4 border-b flex items-center justify-between">
        <div id="lgTitle" class="font-semibold text-gray-800">X√°c nh·∫≠n</div>
        <button class="btn btn-outline btn-xs" id="lgClose" aria-label="ƒê√≥ng">‚úï</button>
      </div>
      <div class="px-6 py-5" id="lgDesc">
        <p class="text-gray-700">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒëƒÉng xu·∫•t kh√¥ng?</p>
      </div>
      <div class="px-6 py-4 border-t flex justify-end gap-3 bg-gray-50 rounded-b-2xl">
        <button class="btn btn-outline" id="lgCancel">H·ªßy</button>
        <button class="btn btn-primary" id="lgOK">ƒêƒÉng xu·∫•t</button>
      </div>
    </div>
  </div>

<script src="compilation.js"></script>
</body>
</html>
