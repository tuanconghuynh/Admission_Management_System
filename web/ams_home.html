{% extends "layout_ams.html" %}

{% block title %}Trang ch·ªß | AMS{% endblock %}
{% set active_page = 'home' %}

{% block content %}
  <!-- Ch√†o -->
  <div class="aurora-small">
    <!-- Sticker v·∫©y v·∫©y -->
    <span class="aurora-sticker">üëã</span>

    <h2 class="aurora-title">
      Xin ch√†o, <span id="dashName"></span>
    </h2>
    <p class="aurora-sub">
      Ch√∫c b·∫°n m·ªôt ng√†y l√†m vi·ªác hi·ªáu qu·∫£.
    </p>
  </div>

  <!-- Th·ªëng k√™ t·ªïng quan -->
  <section class="mt-6">
    <h2 class="text-xl font-bold text-gray-800 mb-4">üìä Th·ªëng k√™ h·ªì s∆°</h2>

    <!-- B·ªò L·ªåC KHO√Å / ƒê·ª¢T -->
    <div class="flex flex-wrap items-center gap-3 mb-4 text-sm">
      <div class="flex items-center gap-2">
        <label for="filterKhoa" class="font-medium text-gray-700">Ni√™n kh√≥a:</label>
        <select id="filterKhoa" class="input w-32 py-1 text-sm">
          <option value="">T·∫•t c·∫£</option>
          <!-- JS fill -->
        </select>
      </div>

      <div class="flex items-center gap-2">
        <label for="filterDot" class="font-medium text-gray-700">ƒê·ª£t:</label>
        <select id="filterDot" class="input w-28 py-1 text-sm">
          <option value="">T·∫•t c·∫£</option>
          <!-- JS fill -->
        </select>
      </div>

      <button id="btnClearFilter" class="btn btn-outline btn-xs">
        X√≥a l·ªçc
      </button>

      <span id="filterSummary" class="text-xs text-gray-500 ml-auto">
        ƒêang xem: t·∫•t c·∫£ kh√≥a/ƒë·ª£t
      </span>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

      <!-- T·ªïng h·ªçc vi√™n -->
      <div class="card p-5 text-center shadow">
        <p class="text-gray-500 font-bold">T·ªïng h·ªçc vi√™n</p>
        <h3 id="countTotal" class="text-3xl font-bold text-blue-700">0</h3>
      </div>

      <!-- S·ªë ng√†nh (tooltip t·ªïng theo ng√†nh) -->
      <div class="card p-5 text-center shadow">
        <p class="text-gray-500 mb-1 font-bold">T·ªïng s·ªë ng√†nh</p>
        <div id="majorsWrapper" class="relative inline-block">
          <div class="text-3xl font-bold cursor-help" id="countMajors">0</div>
          <div id="majorsTooltip"
               class="hidden absolute z-30 mt-2 right-0 w-80 bg-white border border-gray-200 rounded-xl shadow-lg p-3 text-sm">
          </div>
        </div>
      </div>

      <!-- ƒê√£ x·ª≠ l√Ω (tooltip theo ng√†nh) -->
      <div class="card p-5 text-center shadow">
        <p class="text-gray-500 mb-1 font-bold">H·ªì s∆° ƒë√£ x·ª≠ l√Ω</p>
        <div id="doneWrapper" class="relative inline-block">
          <div id="countDone" class="text-3xl font-bold text-green-600 cursor-help">0</div>
          <div id="doneTooltip"
               class="hidden absolute z-30 mt-2 right-0 w-80 bg-white border border-gray-200 rounded-xl shadow-lg p-3 text-sm">
          </div>
        </div>
      </div>

      <!-- Ch·ªù x·ª≠ l√Ω -->
      <div class="card p-5 text-center shadow">
        <p class="text-gray-500 font-bold">H·ªì s∆° ch·ªù x·ª≠ l√Ω</p>
        <h3 id="countPending" class="text-3xl font-bold text-amber-600">0</h3>
      </div>

    </div>
  </section>

  <!-- Th·ªëng k√™ chi ti·∫øt theo ng√†nh -->
  <section class="mt-8">
    <h3 class="text-xl font-bold text-gray-800 mb-3">üìö Th·ªëng k√™ chi ti·∫øt theo ng√†nh</h3>
    <p class="text-sm text-gray-500 mb-2">
      B·∫£ng n√†y hi·ªÉn th·ªã t·ªïng s·ªë h·ªì s∆°, s·ªë h·ªì s∆° ƒë√£ x·ª≠ l√Ω v√† ch·ªù x·ª≠ l√Ω theo t·ª´ng ng√†nh.
    </p>
    <div class="card p-4 mt-2 overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead>
          <tr class="bg-slate-50 text-gray-700">
            <th class="text-center px-3 py-2 border-b">#</th>
            <th class="text-center px-3 py-2 border-b">Ng√†nh</th>
            <th class="text-center px-3 py-2 border-b">T·ªïng h·ªì s∆°</th>
            <th class="text-center px-3 py-2 border-b">ƒê√£ x·ª≠ l√Ω</th>
            <th class="text-center px-3 py-2 border-b">Ch·ªù x·ª≠ l√Ω</th>
            <th class="text-center px-3 py-2 border-b">% ƒê√£ x·ª≠ l√Ω</th>
          </tr>
        </thead>
        <tbody id="majorStatsBody">
          <!-- JS fill -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Ch·ª©c nƒÉng nhanh -->
  <section class="mt-8">
    <h3 class="text-xl font-bold text-gray-800 mb-4">‚ö° Ch·ª©c nƒÉng nhanh</h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      <a href="/compilation.html" class="card group hover:shadow-xl p-6 transition border border-blue-100">
        <div class="text-4xl mb-3 group-hover:scale-110 transition">üìù</div>
        <h4 class="text-lg font-bold text-blue-700">Nh·∫≠p h·ªì s∆° m·ªõi</h4>
        <p class="text-gray-600 mt-1">T·∫°o m·ªõi v√† bi√™n nh·∫≠n h·ªì s∆° nh·∫≠p h·ªçc.</p>
      </a>

      <a href="/students_list.html" class="card group hover:shadow-xl p-6 transition border border-blue-100">
        <div class="text-4xl mb-3 group-hover:scale-110 transition">üìã</div>
        <h4 class="text-lg font-bold text-blue-700">Danh s√°ch h·ªì s∆°</h4>
        <p class="text-gray-600 mt-1">Xem, tra c·ª©u v√† qu·∫£n l√Ω h·ªì s∆° ƒë√£ nh·∫≠p.</p>
      </a>

      <a href="/import_students.html" class="card group hover:shadow-xl p-6 transition border border-blue-100">
        <div class="text-4xl mb-3 group-hover:scale-110 transition">‚¨áÔ∏è</div>
        <h4 class="text-lg font-bold text-blue-700">Import h·ªçc vi√™n</h4>
        <p class="text-gray-600 mt-1">Nh·∫≠p danh s√°ch t·ª´ Excel.</p>
      </a>

    </div>
  </section>
{% endblock %}

{% block scripts %}
  <script src="ams_home.js"></script>
{% endblock %}
